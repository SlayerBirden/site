# This is a part of Maketok site package.
# @author Oleg Kulik <slayer.birden@gmail.com>
# For the full copyright and license information, please view the LICENSE
# file that was distributed with this source code.

services:

  module_model:
    class: Maketok\Module\Resource\Model\Module

  module_result_set:
    class: %hydrating_resultset%
    arguments: ["@object_prop_hydrator", "@module_model"]

  module_table_gateway:
    class: Zend\Db\TableGateway\TableGateway
    arguments:
      - modules
      - "@adapter"
      - []
      - "@module_result_set"

  module_table:
    class: Maketok\Model\TableMapper
    arguments: ["@module_table_gateway", [module_code, area]]

  module.form.type:
            class: Maketok\Module\Resource\form\ModuleType
            tags:
                - { name: form.type, alias: module }

  module_manager:
      class: Maketok\Module\ModuleManager
      arguments:
        - "@module_table"
        - "%module_config_name%"
        - "%module_area%"
